import { parseNameFrom, parseKeyFrom, parseCSV } from "@/modules/parser";
//TODO: This function should probably lowercase values like the, to, and, of, etc. in title and capitalize them in camel;
describe("Parse friendly name from group key", () => {
  it("returns something...", () => {
    expect(parseNameFrom("blah")).toBeTruthy();
  });
  it("Can parse words in camel case", () => {
    const key = "thisIsMyTest";
    const name = "This Is My Test";
    expect(parseNameFrom(key)).toMatch(name);

    const key2 = "ThisWordIsInCaps";
    const name2 = "This Word Is In Caps";
    expect(parseNameFrom(key2)).toMatch(name2);
  });

  it("Can parse words with CPE in them", () => {
    const key = "cpeClub";
    const name = "CPE Club";
    expect(parseNameFrom(key)).toMatch(name);

    const key2 = "associatesOfCpe";
    const name2 = "Associates Of CPE";
    expect(parseNameFrom(key2)).toMatch(name2);
  });
});

describe("Parses key from friendly name", () => {
  it("returns something...", () => {
    expect(parseKeyFrom("Hey There")).toBeTruthy();
  });

  it("Can turn capitalized spaced words into camel case", () => {
    let name = "Two Things Are Infinite The Universe And Human Stupidity";
    let key = "twoThingsAreInfiniteTheUniverseAndHumanStupidity";
    expect(parseKeyFrom(name)).toMatch(key);

    let name2 = "Be The Change That You Wish To See In The World";
    let key2 = "beTheChangeThatYouWishToSeeInTheWorld";
    expect(parseKeyFrom(name2)).toMatch(key2);
  });

  it("Can handle acronyms", () => {
    let name = "CPE Is Awesome";
    let key = "cpeIsAwesome";
    expect(parseKeyFrom(name)).toMatch(key);

    let name2 = "See How Awesome CPE Is";
    let key2 = "seeHowAwesomeCpeIs";
    expect(parseKeyFrom(name2)).toMatch(key2);
  });
});

describe("Parses phone numbers from CSV", () => {
  it("Can parse a phone number in common formats", () => {
    const csv =
      '"Filler","18313243425", "fi342ller\n"Hi there","1(831) 324-3426"\n"18/19/2019","1831 - 324 -3 427", "1234"';
    const phoneNumbers = ["18313243425", "18313243426", "18313243427"];
    expect(parseCSV(csv)).toEqual(phoneNumbers);
  });

  it("Eliminates duplicates", () => {
    const csv = '8313243425","(831) 324-3425"\n"18/19/2019","831 - 324 -3 425"';
    const phoneNumbers = ["18313243425"];
    expect(parseCSV(csv)).toEqual(phoneNumbers);
  });

  it("Adds country code to numbers", () => {
    const csv = '8313243425","(831) 324-3426"\n"18/19/2019","831 - 324 -3 427"';
    const phoneNumbers = ["18313243425", "18313243426", "18313243427"];
    expect(parseCSV(csv)).toEqual(phoneNumbers);
  });

  it("Does not interpret dates as phone numbers", () => {
    let dates = [
      "4/23/2019 7:03:03 PM",
      "4/2/2019 6:27:50 PM",
      "4/2/2019 6:27:46 PM",
      "4/2/2019 6:27:45 PM",
      "4/2/2019 6:27:45 PM",
      "4/2/2019 6:27:37 PM",
      "4/2/2019 6:27:36 PM",
      "3/12/2019 6:13:43 PM",
      "3/5/2019 6:12:26 PM",
      "2/26/2019 6:12:06 PM",
      "2/19/2019 10:06:39 AM",
      "2/12/2019 6:14:28 PM",
      "2/12/2019 6:14:07 PM",
      "2/12/2019 6:14:02 PM",
      "2/12/2019 6:14:02 PM",
      "1/29/2019 6:17:34 PM",
      "1/29/2019 6:17:25 PM",
      "1/29/2019 6:17:17 PM",
      "1/29/2019 6:17:13 PM",
      "1/29/2019 6:17:13 PM",
      "1/29/2019 6:17:09 PM",
      "1/29/2019 6:17:08 PM",
      "1/22/2019 6:12:53 PM",
      "1/15/2019 6:13:57 PM",
      "1/15/2019 6:13:40 PM",
      "1/15/2019 6:13:40 PM",
      "1/15/2019 6:13:35 PM",
      "1/15/2019 6:13:27 PM",
      "1/15/2019 6:13:27 PM",
      "1/15/2019 6:05:57 PM",
      "1/8/2019 6:13:40 PM",
      "1/8/2019 6:13:35 PM",
      "1/8/2019 6:13:35 PM",
      "1/8/2019 6:13:35 PM",
      "1/8/2019 6:13:35 PM",
      "1/8/2019 6:13:35 PM",
      "1/8/2019 6:13:31 PM",
      "1/8/2019 6:13:31 PM",
      "1/8/2019 6:13:26 PM",
      "1/8/2019 6:13:26 PM",
      "11/27/2018 6:13:39 PM",
      "11/27/2018 6:13:39 PM",
      "11/27/2018 6:13:29 PM",
      "11/6/2018 6:12:14 PM",
      "10/31/2018 3:59:47 PM",
      "10/31/2018 3:59:47 PM",
      "10/31/2018 3:59:47 PM",
      "10/31/2018 3:59:47 PM",
      "10/31/2018 3:59:47 PM",
      "10/23/2018 7:04:01 PM",
      "10/23/2018 6:13:37 PM",
      "10/23/2018 6:13:32 PM",
      "10/23/2018 6:13:31 PM",
      "10/23/2018 6:13:31 PM",
      "10/23/2018 6:13:31 PM",
      "10/16/2018 7:09:03 PM",
      "10/16/2018 6:16:41 PM",
      "10/16/2018 6:16:27 PM",
      "10/16/2018 6:16:18 PM",
      "10/16/2018 6:16:04 PM",
      "10/16/2018 6:16:00 PM",
      "10/16/2018 6:15:55 PM",
      "10/16/2018 6:15:50 PM",
      "10/16/2018 6:15:50 PM",
      "10/16/2018 6:15:40 PM",
      "10/16/2018 6:15:40 PM",
      "10/16/2018 6:15:40 PM",
      "10/16/2018 6:15:35 PM",
      "10/16/2018 1:54:41 PM",
      "10/9/2018 7:34:42 PM",
      "10/9/2018 6:12:44 PM",
      "10/9/2018 6:12:40 PM",
      "10/9/2018 6:12:28 PM",
      "10/2/2018 7:03:09 PM",
      "10/2/2018 6:14:22 PM",
      "10/2/2018 6:14:12 PM",
      "10/2/2018 6:13:59 PM",
      "10/2/2018 6:13:50 PM",
      "10/2/2018 6:13:41 PM",
      "10/2/2018 6:13:41 PM",
      "10/2/2018 6:13:41 PM",
      "10/2/2018 6:13:40 PM",
      "10/2/2018 6:13:40 PM",
      "10/2/2018 6:13:40 PM",
      "10/2/2018 6:13:36 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:35 PM",
      "10/2/2018 6:13:34 PM",
      "10/2/2018 6:13:34 PM",
      "10/2/2018 6:13:30 PM",
      "10/2/2018 6:13:29 PM",
      "10/2/2018 6:13:29 PM",
      "10/2/2018 6:13:29 PM",
      "10/2/2018 6:13:20 PM",
      "9/26/2018 3:16:12 PM",
      "9/25/2018 6:17:08 PM",
      "9/25/2018 6:17:03 PM",
      "9/25/2018 6:15:17 PM",
      "9/25/2018 6:09:28 PM",
      "9/25/2018 6:08:19 PM",
      "5/16/2018 12:07:30 PM",
      "5/8/2018 6:11:23 PM",
      "5/8/2018 6:11:19 PM",
      "5/8/2018 5:56:41 PM",
      "4/3/2018 6:45:14 PM",
      "2/28/2018 12:11:44 PM",
      "2/27/2018 6:07:43 PM",
      "1/30/2018 6:03:25 PM",
      "1/23/2018 6:09:55 PM",
      "1/9/2018 6:05:43 PM",
      "11/14/2017 5:49:57 PM",
      "10/24/2017 4:59:23 PM",
      "10/24/2017 4:08:07 PM",
      "10/10/2017 7:25:30 PM",
      "10/10/2017 6:09:28 PM",
      "10/10/2017 6:08:46 PM",
      "10/10/2017 6:06:58 PM",
      "10/10/2017 6:05:55 PM",
      "10/10/2017 6:05:18 PM",
      "10/10/2017 6:01:33 PM",
      "10/10/2017 6:00:25 PM",
      "10/10/2017 6:00:07 PM",
      "10/10/2017 5:59:42 PM",
      "10/10/2017 5:59:38 PM",
      "10/10/2017 5:58:31 PM",
      "10/6/2017 11:07:36 PM",
      "10/3/2017 6:13:40 PM",
      "10/3/2017 6:12:30 PM",
      "10/3/2017 6:12:21 PM",
      "10/3/2017 6:12:09 PM",
      "10/3/2017 6:12:04 PM",
      "10/3/2017 6:12:00 PM",
      "10/3/2017 6:11:56 PM",
      "10/3/2017 6:11:56 PM",
      "10/3/2017 6:11:51 PM",
      "10/3/2017 6:11:51 PM",
      "10/3/2017 6:11:51 PM",
      "10/3/2017 6:11:51 PM",
      "10/3/2017 6:11:46 PM",
      "10/3/2017 6:11:42 PM",
      "10/3/2017 6:11:42 PM",
      "10/3/2017 6:10:06 PM",
      "10/3/2017 6:08:51 PM",
      "10/3/2017 6:06:38 PM",
      "10/3/2017 6:06:21 PM",
      "10/3/2017 6:06:04 PM",
      "10/3/2017 6:05:22 PM",
      "9/26/2017 7:09:25 PM",
      "9/26/2017 7:09:20 PM",
      "9/26/2017 7:09:20 PM",
      "9/26/2017 7:09:03 PM",
      "9/26/2017 7:08:50 PM",
      "9/26/2017 7:08:46 PM",
      "9/26/2017 7:08:46 PM",
      "9/26/2017 7:08:46 PM",
      "9/26/2017 7:08:37 PM",
      "5/16/2017 6:56:24 PM",
      "4/11/2017 6:12:42 PM",
      "2/1/2017 8:17:00 AM",
      "1/25/2017 7:25:58 PM",
      "1/17/2017 8:18:42 PM",
      "1/10/2017 6:59:38 PM",
      "1/10/2017 6:58:57 PM",
      "1/10/2017 10:52:07 AM",
      "12/5/2016 4:28:43 PM",
      "11/29/2016 6:15:00 PM",
      "11/29/2016 6:14:56 PM",
      "11/29/2016 6:14:52 PM",
      "11/29/2016 6:14:52 PM",
      "11/29/2016 6:14:44 PM",
      "11/29/2016 6:14:40 PM",
      "11/1/2016 6:21:01 PM",
      "11/1/2016 6:20:45 PM",
      "11/1/2016 6:20:20 PM",
      "11/1/2016 6:20:12 PM",
      "10/25/2016 7:18:15 PM",
      "10/18/2016 6:13:06 PM",
      "10/13/2016 4:19:13 PM",
      "10/11/2016 6:26:53 PM",
      "10/11/2016 6:18:49 PM",
      "10/11/2016 6:18:41 PM",
      "10/11/2016 6:18:33 PM",
      "10/11/2016 6:18:20 PM",
      "10/11/2016 6:18:16 PM",
      "10/11/2016 6:18:00 PM",
      "10/11/2016 6:05:26 PM",
      "10/11/2016 6:05:14 PM",
      "10/11/2016 6:05:02 PM",
      "10/5/2016 11:53:36 AM",
      "9/28/2016 12:53:20 AM",
      "9/27/2016 11:49:33 PM",
      "9/27/2016 7:10:17 PM",
      "9/27/2016 6:21:13 PM",
      "9/27/2016 6:21:01 PM",
      "9/27/2016 6:20:52 PM",
      "9/27/2016 6:20:48 PM",
      "9/27/2016 6:20:40 PM",
      "9/27/2016 6:20:40 PM",
      "9/27/2016 6:20:36 PM",
      "9/27/2016 6:20:36 PM",
      "9/27/2016 6:20:36 PM",
      "9/27/2016 6:20:31 PM",
      "9/27/2016 6:20:31 PM",
      "9/27/2016 6:20:27 PM",
      "9/27/2016 6:20:27 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:23 PM",
      "9/27/2016 6:20:19 PM",
      "9/27/2016 6:20:18 PM",
      "9/27/2016 6:20:14 PM",
      "9/27/2016 6:20:14 PM",
      "9/27/2016 6:20:14 PM",
      "9/27/2016 6:20:14 PM",
      "9/27/2016 6:20:14 PM",
      "9/27/2016 6:20:10 PM",
      "9/27/2016 6:20:06 PM",
      "9/27/2016 6:20:02 PM",
      "9/27/2016 6:19:58 PM",
      "5/10/2016 6:45:23 PM",
      "4/19/2016 7:46:33 PM",
      "4/12/2016 6:42:46 PM",
      "4/12/2016 6:42:34 PM",
      "3/29/2016 7:32:29 PM",
      "3/29/2016 7:32:25 PM",
      "3/29/2016 7:32:21 PM",
      "3/29/2016 7:32:17 PM",
      "3/29/2016 7:32:17 PM",
      "3/29/2016 6:21:18 PM",
      "2/23/2016 7:45:17 PM",
      "2/12/2016 7:26:40 PM",
      "2/9/2016 6:53:32 PM",
      "2/9/2016 6:53:32 PM",
      "2/2/2016 6:57:59 PM",
      "2/2/2016 6:57:18 PM",
      "2/2/2016 6:56:05 PM",
      "11/24/2015 6:29:19 PM",
      "10/26/2015 8:47:43 PM",
      "10/26/2015 8:47:39 PM",
      "10/20/2015 8:03:51 PM",
      "10/20/2015 7:41:01 PM",
      "10/20/2015 7:40:54 PM",
      "10/20/2015 7:40:53 PM",
      "9/26/2015 3:39:30 PM",
      "9/26/2015 2:02:42 PM",
      "9/26/2015 1:23:05 PM",
      "9/26/2015 1:16:50 PM",
      "9/20/2015 11:44:48 AM",
      "9/18/2015 4:19:56 PM",
      "9/18/2015 2:56:08 PM",
      "9/18/2015 2:55:55 PM",
      "9/18/2015 2:55:51 PM",
      "9/18/2015 2:55:48 PM",
      "9/18/2015 2:55:30 PM",
      "9/18/2015 2:55:30 PM",
      "9/18/2015 2:55:30 PM",
      "9/18/2015 2:46:43 PM",
      "9/18/2015 2:46:41 PM",
      "9/18/2015 2:37:21 PM",
      "9/18/2015 2:29:51 PM",
      "9/18/2015 2:29:35 PM",
      "9/18/2015 2:28:26 PM",
      "9/18/2015 2:28:10 PM",
      "9/18/2015 2:27:58 PM",
      "9/18/2015 2:27:55 PM",
      "9/18/2015 1:20:05 PM",
      "9/18/2015 1:19:13 PM",
      "9/18/2015 1:18:52 PM",
      "9/18/2015 1:18:11 PM",
      "9/18/2015 1:17:45 PM",
      "9/18/2015 1:17:28 PM",
      "9/18/2015 1:17:12 PM",
      "9/18/2015 1:17:11 PM",
      "9/18/2015 1:16:29 PM",
      "9/18/2015 1:16:24 PM",
      "9/18/2015 1:16:15 PM",
      "9/18/2015 1:16:09 PM",
      "9/18/2015 1:16:07 PM",
      "9/18/2015 1:16:07 PM",
      "9/18/2015 1:16:03 PM",
      "9/18/2015 1:15:56 PM",
      "9/18/2015 1:15:46 PM",
      "9/18/2015 12:27:56 PM",
      "9/17/2015 3:46:15 PM",
      "9/17/2015 3:15:02 PM",
      "9/17/2015 3:14:07 PM",
      "9/17/2015 3:13:50 PM",
      "9/17/2015 3:13:33 PM",
      "9/17/2015 2:26:01 PM",
      "9/17/2015 2:26:01 PM",
      "9/17/2015 2:24:11 PM",
      "9/17/2015 2:23:38 PM",
      "9/17/2015 2:23:36 PM",
      "9/17/2015 2:23:33 PM",
      "9/17/2015 2:23:33 PM",
      "9/17/2015 2:23:30 PM",
      "9/17/2015 2:23:27 PM",
      "9/17/2015 2:23:17 PM",
      "9/17/2015 1:58:49 PM",
      "9/17/2015 1:38:07 PM",
      "9/17/2015 1:37:54 PM",
      "9/17/2015 1:24:26 PM",
      "5/19/2015 6:36:33 PM",
      "4/28/2015 7:56:16 PM",
      "4/28/2015 6:52:16 PM",
      "4/21/2015 7:40:50 PM",
      "4/21/2015 6:41:42 PM",
      "2/25/2015 10:48:24 AM",
      "2/20/2015 8:21:37 PM",
      "2/11/2015 7:16:17 AM",
      "2/10/2015 6:37:42 PM",
      "1/20/2015 7:01:02 PM",
      "11/21/2014 8:05:28 PM",
      "11/18/2014 7:48:43 PM",
      "10/4/2014 3:33:59 PM",
      "10/2/2014 10:54:02 AM",
      "9/30/2014 6:41:08 PM",
      "9/30/2014 6:39:53 PM",
      "9/30/2014 6:39:35 PM",
      "9/30/2014 6:28:38 PM",
      "9/30/2014 12:19:59 PM",
      "9/29/2014 5:09:55 PM",
      "9/29/2014 12:36:54 PM",
      "9/29/2014 12:12:09 PM",
      "9/29/2014 12:11:56 PM",
      "9/23/2014 7:44:48 PM",
      "9/23/2014 7:19:19 PM",
      "9/23/2014 6:42:42 PM",
      "9/23/2014 6:38:19 PM",
      "9/23/2014 6:36:29 PM",
      "9/23/2014 6:36:10 PM",
      "9/23/2014 6:36:01 PM",
      "9/23/2014 6:35:58 PM",
      "9/23/2014 6:35:56 PM",
      "9/23/2014 6:35:55 PM",
      "9/23/2014 6:35:54 PM",
      "9/23/2014 6:35:54 PM",
      "9/23/2014 6:35:54 PM",
      "9/23/2014 6:35:53 PM",
      "9/23/2014 6:35:53 PM",
      "9/23/2014 6:35:53 PM",
      "9/23/2014 6:35:51 PM",
      "9/23/2014 6:35:50 PM",
      "9/23/2014 6:35:50 PM",
      "9/23/2014 6:35:50 PM",
      "9/23/2014 6:35:44 PM",
      "9/23/2014 6:35:43 PM",
      "9/23/2014 6:35:40 PM",
      "9/23/2014 6:35:38 PM",
      "9/23/2014 6:30:17 PM",
      "9/23/2014 6:22:58 PM",
      "9/23/2014 6:20:41 PM",
      "9/23/2014 6:19:23 PM",
      "9/23/2014 6:19:11 PM",
      "5/20/2014 6:47:33 PM",
      "5/13/2014 6:38:15 PM",
      "4/29/2014 6:40:16 PM",
      "4/22/2014 8:37:45 PM",
      "4/15/2014 6:39:13 PM",
      "4/15/2014 6:38:58 PM",
      "4/8/2014 6:32:57 PM",
      "3/4/2014 6:44:25 PM",
      "2/25/2014 6:35:50 PM",
      "2/25/2014 6:35:39 PM",
      "2/4/2014 6:37:57 PM",
      "1/29/2014 10:02:24 AM",
      "1/14/2014 6:58:13 PM",
      "1/14/2014 6:34:59 PM",
      "10/18/2013 9:01:37 AM",
      "10/15/2013 6:41:35 PM",
      "10/10/2013 5:54:11 PM",
      "10/1/2013 7:33:42 PM",
      "10/1/2013 7:33:37 PM",
      "10/1/2013 7:33:32 PM",
      "10/1/2013 6:32:57 PM",
      "9/26/2013 9:12:51 PM",
      "9/24/2013 7:29:27 PM",
      "9/24/2013 7:17:30 PM",
      "9/24/2013 7:17:17 PM",
      "9/24/2013 7:16:54 PM",
      "9/24/2013 7:16:35 PM",
      "9/24/2013 7:16:09 PM",
      "9/24/2013 6:55:41 PM",
      "9/24/2013 6:35:08 PM",
      "9/24/2013 6:35:07 PM",
      "9/24/2013 6:35:00 PM",
      "9/22/2013 2:49:21 PM",
      "9/22/2013 2:45:22 PM",
      "9/22/2013 2:33:06 PM",
      "9/22/2013 2:16:34 PM",
      "9/22/2013 2:04:51 PM",
      "9/22/2013 1:45:16 PM",
      "9/22/2013 1:45:05 PM",
      "9/22/2013 1:42:24 PM",
      "9/22/2013 1:40:11 PM",
      "9/22/2013 1:38:53 PM",
      "9/22/2013 1:31:28 PM",
      "9/22/2013 1:23:19 PM",
      "9/22/2013 1:16:50 PM",
      "9/22/2013 1:16:42 PM",
      "9/22/2013 1:16:16 PM",
      "9/22/2013 1:10:51 PM",
      "9/22/2013 1:10:51 PM",
      "9/22/2013 1:05:02 PM",
      "9/22/2013 12:59:49 PM",
      "9/22/2013 12:53:41 PM",
      "9/22/2013 12:49:18 PM",
      "9/22/2013 12:46:14 PM",
      "9/22/2013 12:21:25 PM",
      "9/22/2013 12:16:15 PM",
      "9/22/2013 12:16:04 PM",
      "9/22/2013 12:09:01 PM",
      "9/22/2013 11:51:52 AM",
      "9/22/2013 11:42:30 AM",
      "9/22/2013 11:41:53 AM",
      "9/22/2013 11:35:03 AM",
      "9/22/2013 11:26:21 AM",
      "9/22/2013 11:22:53 AM",
      "9/22/2013 11:22:34 AM",
      "9/22/2013 11:21:50 AM",
      "9/22/2013 11:18:41 AM",
      "9/22/2013 11:02:52 AM",
      "9/22/2013 9:15:25 AM",
      "9/4/2013 11:01:11 AM"
    ];

    let csv = dates.reduce((csv, date) => {
      csv += `"${date}", `;
      return csv;
    }, "");

    let res = parseCSV(csv);
    expect(res.length).toBe(0);
  });

  it("Returns an empty array if there are no numbers.", () => {
    let noNumbers = ' "heyoooo", "no numbers heree", "!@$$%#%^"';
    let res = parseCSV(noNumbers);
    expect(res.length).toBe(0);
  });
});
